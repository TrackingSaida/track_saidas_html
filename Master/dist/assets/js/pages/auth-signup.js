const SIGNUP_URL="https://track-saidas-api.onrender.com/api/users/";!function(){const e=document.getElementById("senha-input");var t=document.getElementById("senha-addon");e&&t&&t.addEventListener("click",()=>{e.type="password"===e.type?"text":"password"})}(),document.getElementById("signup-form").addEventListener("submit",async e=>{e.preventDefault();e=e.target;if(e.checkValidity()){var t=document.getElementById("useremail").value.trim(),a=document.getElementById("username").value.trim(),n=document.getElementById("contato").value.trim(),o=document.getElementById("senha-input").value,s=document.getElementById("signup-btn"),i=s.innerText;s.disabled=!0,s.innerText="Enviando...";try{var d,r,c=await fetch(SIGNUP_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,username:a,contato:n,password_hash:o})});c.ok?(alert("Conta criada com sucesso!"),window.location.href="auth-signin-basic.html"):(r=(d=await c.json().catch(()=>({})))?.detail||d?.message||"Erro ao criar conta.",alert(r))}catch(e){console.error(e),alert("Falha ao comunicar com o servidor.")}finally{s.disabled=!1,s.innerText=i}}else e.classList.add("was-validated")});